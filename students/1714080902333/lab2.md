# 实验二：用例建模

## 一、实验目的
1. 继续学习使用markdown编辑实验报告
2. 明确选题
3. 学习StarUML完成用例建模

## 二、实验内容
1. 创建用例图
2. 完成实验报告文档
3. 完成用例规约

## 三、实验步骤
1. 选题为HTTP Server
2. 根据选题创建用例图（Use Case Diagram）
3. 确定参与者（Actor）
    - 客户端
4. 确定用例（Use Case）
    - 建立连接
    - 获取服务
5. 建立Actor与Use Case的关联
6. 完成用例规约（Use Case Specification）

## 四、实验结果

### 1. Use Case Diagram
![Lab2-HTTP_UseCaseDiagram](./lab2_UseCaseDiagram.jpg)

### 2. Use Case Specification

**Specification 1**: 建立连接

| 用例编号 | UC01 | 备注 |
| ------- | ---- | --- |
| 用例名称 | 建立连接 |  |
| 前置条件 | 客户端完成socket的配置 | 必须 |
| 后置条件 |  |  |
| 基本流程 | 1. 客户端调用connect发起连接请求； | 用例正常处理流程 |
| ~ | 2. 服务器接收到请求，允许连接，向客户端发送应答报文； | |
| ~ | 3. 客户端收到应答报文后从connect调用返回，提示单向连接完成并向服务器发送确认报文； | |
| ~ | 4. 服务器收到确认报文后从accept调用返回，提示双向连接完成； | |
| 拓展流程 | 2.1 服务器接收到请求，拒绝连接，向客户端发送RST报文； | 用例执行异常 |
| ~ | 3.1 客户端收到RST报文，提示连接建立失败并返回errno； | |
| ~ | 3.2 客户端未收到应答报文，connect调用超时，提示连接建立失败并返回errno； | |

**Specification 2**: 获取服务

| 用例编号 | UC02 | 备注 |
| ------- | ---- | --- |
| 用例名称 | 获取服务 |  |
| 前置条件 | 客户端与服务器的连接已建立 | 必须 |
| 后置条件 |  |  |
| 基本流程 | 1. 客户端发送请求报文至服务器，获取相关服务 | 用例正常处理流程 |
| ~ | 2. 服务器接收并解析请求报文 | |
| ~ | 3. 服务器成功获取请求的资源，发送响应报文发送至客户端 | |
| ~ | 4. 客户端接收并解析响应报文，显示资源 | |
| 拓展流程 | 2.1 服务器无法解析请求报文，发送状态码400报文至客户端 | 用例执行异常 |
| ~ | 2.2 服务器无法找到请求的资源，发送状态码404报文至客户端 |  |
| ~ | 4.1 客户端收到状态码400报文，提示400 Bad Request |  |
| ~ | 4.2 客户端收到状态码404报文，提示404 Not Found |  |